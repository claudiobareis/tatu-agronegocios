{%- comment -%}
  Renders a button element.
  
  @param {object} settings - The settings object containing button properties
{%- endcomment -%}

{%- liquid
  assign text = settings.text | default: 'Button'
  assign link = settings.link | default: ''
  assign open_in_new_tab = settings.open_in_new_tab | default: false
  assign button_style = settings.button_style | default: 'primary'
  assign button_size = settings.button_size | default: 'medium'
  assign full_width = settings.full_width | default: false
  assign icon = settings.icon | default: ''
  assign icon_position = settings.icon_position | default: 'left'
  assign padding_block_start = settings.padding-block-start | default: 0
  assign padding_block_end = settings.padding-block-end | default: 0
  assign padding_inline_start = settings.padding-inline-start | default: 0
  assign padding_inline_end = settings.padding-inline-end | default: 0
-%}

{%- if link != blank -%}
  <a 
    href="{{ link }}"
    class="
      button
      button--{{ button_style }}
      button--{{ button_size }}
      {% if full_width %}button--full-width{% endif %}
      {% if icon != blank %}button--icon-{{ icon_position }}{% endif %}
    "
    {% if open_in_new_tab %}
      target="_blank"
      rel="noopener noreferrer"
    {% endif %}
    style="
      {% if padding_block_start > 0 %}padding-block-start: {{ padding_block_start }}px;{% endif %}
      {% if padding_block_end > 0 %}padding-block-end: {{ padding_block_end }}px;{% endif %}
      {% if padding_inline_start > 0 %}padding-inline-start: {{ padding_inline_start }}px;{% endif %}
      {% if padding_inline_end > 0 %}padding-inline-end: {{ padding_inline_end }}px;{% endif %}
    "
  >
    {%- if icon != blank and icon_position == 'left' -%}
      <span class="button__icon button__icon--left">
        {% render icon %}
      </span>
    {%- endif -%}
    
    <span class="button__text">{{ text }}</span>
    
    {%- if icon != blank and icon_position == 'right' -%}
      <span class="button__icon button__icon--right">
        {% render icon %}
      </span>
    {%- endif -%}
  </a>
{%- else -%}
  <button
    type="button"
    class="
      button
      button--{{ button_style }}
      button--{{ button_size }}
      {% if full_width %}button--full-width{% endif %}
      {% if icon != blank %}button--icon-{{ icon_position }}{% endif %}
    "
    style="
      {% if padding_block_start > 0 %}padding-block-start: {{ padding_block_start }}px;{% endif %}
      {% if padding_block_end > 0 %}padding-block-end: {{ padding_block_end }}px;{% endif %}
      {% if padding_inline_start > 0 %}padding-inline-start: {{ padding_inline_start }}px;{% endif %}
      {% if padding_inline_end > 0 %}padding-inline-end: {{ padding_inline_end }}px;{% endif %}
    "
  >
    {%- if icon != blank and icon_position == 'left' -%}
      <span class="button__icon button__icon--left">
        {% render icon %}
      </span>
    {%- endif -%}
    
    <span class="button__text">{{ text }}</span>
    
    {%- if icon != blank and icon_position == 'right' -%}
      <span class="button__icon button__icon--right">
        {% render icon %}
      </span>
    {%- endif -%}
  </button>
{%- endif -%}

{% stylesheet %}
  .button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 0.75rem 1.5rem;
    border: none;
    border-radius: 0.25rem;
    font-size: 1rem;
    font-weight: 500;
    text-decoration: none;
    cursor: pointer;
    transition: all 0.2s ease;
    text-align: center;
    min-height: 2.75rem;
  }
  
  .button--primary {
    background-color: var(--color-primary);
    color: var(--color-primary-text);
  }
  
  .button--primary:hover {
    background-color: var(--color-primary-dark);
  }
  
  .button--secondary {
    background-color: transparent;
    color: var(--color-primary);
    border: 1px solid var(--color-primary);
  }
  
  .button--secondary:hover {
    background-color: var(--color-primary);
    color: var(--color-primary-text);
  }
  
  .button--small {
    padding: 0.5rem 1rem;
    font-size: 0.875rem;
    min-height: 2.25rem;
  }
  
  .button--large {
    padding: 1rem 2rem;
    font-size: 1.125rem;
    min-height: 3.25rem;
  }
  
  .button--full-width {
    width: 100%;
  }
  
  .button--icon-left {
    flex-direction: row;
  }
  
  .button--icon-right {
    flex-direction: row-reverse;
  }
  
  .button__icon {
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .button__icon svg {
    width: 1rem;
    height: 1rem;
  }
  
  .button__text {
    white-space: nowrap;
  }
  
  .button:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }
{% endstylesheet %}
